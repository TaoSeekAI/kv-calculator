# 噪音计算模块测试结果报告

## 测试日期
2026-01-14 (修复后更新)

## 测试概述

本文档记录了噪音计算模块修复后的测试结果，涵盖液体、气体和蒸汽三种工况。

## 测试结果汇总

| 测试类型 | 测试用例数 | 通过数 | 失败数 | 通过率 |
|----------|-----------|-------|-------|--------|
| 液体噪音 | 3 | 3 | 0 | 100% |
| 气体噪音 | 2 | 2 | 0 | 100% |
| 蒸汽噪音 | 1 | 1 | 0 | 100% |
| **总计** | **6** | **6** | **0** | **100%** |

## 详细测试结果

### 1. 液体噪音测试

#### 1.1 液体-常规工况(水)
| 参数 | 值 |
|------|-----|
| 流量 | 80 m³/h |
| P1/P2 | 1.5/0.2 MPa(G) |
| 温度 | 40℃ |
| DN | 100mm |
| FL | 0.85 |
| **计算Kv** | 23.52 |
| **噪音级** | 74.1 dBA |
| **流动状态** | 恒定空化 |
| 预期范围 | 60-90 dBA |
| **结果** | ✓ 通过 |

#### 1.2 液体-高压差工况
| 参数 | 值 |
|------|-----|
| 流量 | 100 m³/h |
| P1/P2 | 2.0/0.1 MPa(G) |
| 温度 | 50℃ |
| DN | 150mm |
| FL | 0.9 |
| **计算Kv** | 24.17 |
| **噪音级** | 73.8 dBA |
| **流动状态** | 恒定空化 |
| 预期范围 | 70-100 dBA |
| **结果** | ✓ 通过 |

#### 1.3 液体-小流量工况
| 参数 | 值 |
|------|-----|
| 流量 | 10 m³/h |
| P1/P2 | 0.5/0.1 MPa(G) |
| 温度 | 25℃ |
| DN | 50mm |
| FL | 0.9 |
| **计算Kv** | 5.00 |
| **噪音级** | 69.8 dBA |
| **流动状态** | 初生空化 |
| 预期范围 | 50-80 dBA |
| **结果** | ✓ 通过 |

### 2. 气体噪音测试

#### 2.1 气体-空气常规工况
| 参数 | 值 |
|------|-----|
| 流量 | 5000 Nm³/h |
| P1/P2 | 0.6/0.1 MPa(G) |
| 温度 | 20℃ |
| DN | 100mm |
| FL | 0.9 |
| xT | 0.72 |
| **计算Kv** | 224.00 |
| **噪音级** | 100.9 dBA |
| **流动状态** | State III (临界流) |
| 预期范围 | 80-110 dBA |
| **结果** | ✓ 通过 |

#### 2.2 气体-高压差工况
| 参数 | 值 |
|------|-----|
| 流量 | 3000 Nm³/h |
| P1/P2 | 1.0/0.2 MPa(G) |
| 温度 | 50℃ |
| DN | 80mm |
| FL | 0.85 |
| xT | 0.68 |
| **计算Kv** | 92.35 |
| **噪音级** | 97.6 dBA |
| **流动状态** | State III (临界流) |
| 预期范围 | 70-100 dBA |
| **结果** | ✓ 通过 |

### 3. 蒸汽噪音测试

#### 3.1 蒸汽-常规工况
| 参数 | 值 |
|------|-----|
| 流量 | 2000 kg/h |
| P1/P2 | 1.0/0.5 MPa(G) |
| 温度 | 200℃ |
| DN | 80mm |
| FL | 0.9 |
| xT | 0.72 |
| **计算Kv** | 16.13 |
| **噪音级** | 80.0 dBA |
| **流动状态** | State III (临界流) |
| 预期范围 | 65-95 dBA |
| **结果** | ✓ 通过 |

## 中间计算值验证

### 液体噪音计算中间值 (常规工况)
| 参数 | 值 | 说明 |
|------|-----|------|
| Uvc | 56.58 m/s | 缩流断面流速 |
| η | 2.64×10⁻⁴ | 总声效系数 |
| Wm | 25570.74 W | 机械功率 |
| Wa | 1.69 W | 声功率 |
| Lpi | 178.8 dB | 内部声压级 |
| TL | -104.7 dB | 透射损失 |
| Lpe | 74.1 dB | 外部噪音级 |

### 气体噪音计算中间值 (常规工况)
| 参数 | 值 | 说明 |
|------|-----|------|
| Uvc | 313.14 m/s | 缩流断面流速 |
| Mvc | ~1.0 | 缩流断面马赫数 |
| η | 1.13×10⁻³ | 声效系数 |
| Wm | 88045.83 W | 机械功率 |
| Wa | 24.93 W | 声功率 |
| Lpi | 149.9 dB | 内部声压级 |
| TL | -65.0 dB | 透射损失 |
| Lpe | 100.9 dB | 外部噪音级 |

## 结论

1. **所有测试用例全部通过**：噪音计算模块修复后能够正确计算液体、气体和蒸汽的噪音级。

2. **噪音值范围合理**：
   - 液体噪音：69.8-74.1 dBA（符合空化状态典型范围）
   - 气体噪音：97.6-100.9 dBA（符合临界流状态典型范围）
   - 蒸汽噪音：80.0 dBA（符合典型控制阀蒸汽噪音范围）

3. **流动状态识别正确**：
   - 液体：正确识别空化状态（初生空化、恒定空化）
   - 气体：正确识别临界流状态（State III）

4. **警告信息有效**：
   - 噪音超过85 dBA时给出降噪建议
   - 空化状态时给出阀门损坏警告
   - 高流速时给出冲蚀警告
   - 高马赫数时给出修正提示

## 使用方法

```bash
# 计算Kv和噪音
bun cli/batch-calculate.ts test-cases.json --noise

# 计算Kv和噪音，显示详细过程
bun cli/batch-calculate.ts test-cases.json --noise --detail

# 输出结果到JSON文件
bun cli/batch-calculate.ts test-cases.json --noise -o results.json
```

## 参考标准

- IEC 60534-8-3: 气体噪音预测（空气动力学噪声）
- IEC 60534-8-4: 液体噪音预测（液压流体噪声）
